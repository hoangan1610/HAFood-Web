(function($){function appendContent($el,content){content&&$el.append(content.jquery?content.clone():content)}function appendBody($body,$element,opt2){var $content=$element.clone(opt2.formValues);opt2.formValues&&copyValues($element,$content,"select, textarea"),opt2.removeScripts&&$content.find("script").remove(),opt2.printContainer?$content.appendTo($body):$content.each(function(){$(this).children().appendTo($body)})}function copyValues(origin,clone,elementSelector){var $originalElements=origin.find(elementSelector);clone.find(elementSelector).each(function(index,item){$(item).val($originalElements.eq(index).val())})}var opt;$.fn.printThis=function(options){opt=$.extend({},$.fn.printThis.defaults,options);var $element=this instanceof jQuery?this:$(this),strFrameName="printThis-"+new Date().getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var iframeSrc='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")',printI=document.createElement("iframe");printI.name="printIframe",printI.id=strFrameName,printI.className="MSIE",document.body.appendChild(printI),printI.src=iframeSrc}else{var $frame=$("<iframe id='"+strFrameName+"' name='printIframe' />");$frame.appendTo("body")}var $iframe=$("#"+strFrameName);opt.debug||$iframe.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),typeof opt.beforePrint=="function"&&opt.beforePrint(),setTimeout(function(){function setDocType($iframe2,doctype){var win,doc;win=$iframe2.get(0),win=win.contentWindow||win.contentDocument||win,doc=win.document||win.contentDocument||win,doc.open(),doc.write(doctype),doc.close()}opt.doctypeString&&setDocType($iframe,opt.doctypeString);var $doc=$iframe.contents(),$head=$doc.find("head"),$body=$doc.find("body"),$base=$("base"),baseURL;opt.base===!0&&$base.length>0?baseURL=$base.attr("href"):typeof opt.base=="string"?baseURL=opt.base:baseURL=document.location.protocol+"//"+document.location.host,$head.append('<base href="'+baseURL+'">'),opt.importCSS&&$("link[rel=stylesheet]").each(function(){var href=$(this).attr("href");if(href){var media=$(this).attr("media")||"all";$head.append("<link type='text/css' rel='stylesheet' href='"+href+"' media='"+media+"'>")}}),opt.importStyle&&$("style").each(function(){$head.append(this.outerHTML)}),opt.pageTitle&&$head.append("<title>"+opt.pageTitle+"</title>"),opt.loadCSS&&($.isArray(opt.loadCSS)?jQuery.each(opt.loadCSS,function(index,value){$head.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")}):$head.append("<link type='text/css' rel='stylesheet' href='"+opt.loadCSS+"'>"));var pageHtml=$("html")[0];$doc.find("html").prop("style",pageHtml.style.cssText);var tag=opt.copyTagClasses;if(tag&&(tag=tag===!0?"bh":tag,tag.indexOf("b")!==-1&&$body.addClass($("body")[0].className),tag.indexOf("h")!==-1&&$doc.find("html").addClass(pageHtml.className)),appendContent($body,opt.header),opt.canvas){var canvasId=0;$element.find("canvas").addBack("canvas").each(function(){$(this).attr("data-printthis",canvasId++)})}if(appendBody($body,$element,opt),opt.canvas&&$body.find("canvas").each(function(){var cid=$(this).data("printthis"),$src=$('[data-printthis="'+cid+'"]');this.getContext("2d").drawImage($src[0],0,0),$.isFunction($.fn.removeAttr)?$src.removeAttr("data-printthis"):$.each($src,function(i,el){el.removeAttribute("data-printthis")})}),opt.removeInline){var selector=opt.removeInlineSelector||"*";$.isFunction($.removeAttr)?$body.find(selector).removeAttr("style"):$body.find(selector).attr("style","")}appendContent($body,opt.footer);function attachOnBeforePrintEvent($iframe2,beforePrintHandler){var win=$iframe2.get(0);win=win.contentWindow||win.contentDocument||win,typeof beforePrintHandler=="function"&&("matchMedia"in win?win.matchMedia("print").addListener(function(mql){mql.matches&&beforePrintHandler()}):win.onbeforeprint=beforePrintHandler)}attachOnBeforePrintEvent($iframe,opt.beforePrintEvent),setTimeout(function(){$iframe.hasClass("MSIE")?(window.frames.printIframe.focus(),$head.append("<script>  window.print(); <\/script>")):document.queryCommandSupported("print")?$iframe[0].contentWindow.document.execCommand("print",!1,null):($iframe[0].contentWindow.focus(),$iframe[0].contentWindow.print()),opt.debug||setTimeout(function(){$iframe.remove()},1e3),typeof opt.afterPrint=="function"&&opt.afterPrint()},opt.printDelay)},333)},$.fn.printThis.defaults={debug:!1,importCSS:!0,importStyle:!0,printContainer:!0,loadCSS:"",pageTitle:"",removeInline:!1,removeInlineSelector:"*",printDelay:333,header:null,footer:null,base:!1,formValues:!0,canvas:!1,doctypeString:"<!DOCTYPE html>",removeScripts:!1,copyTagClasses:!1,beforePrintEvent:null,beforePrint:null,afterPrint:null}})(jQuery);
//# sourceMappingURL=/cdn/shop/t/3/assets/printThis.js.map?v=181388409738256949281608550916
